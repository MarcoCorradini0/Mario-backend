# =========================
# DEV DATABASE (solo locale)
# =========================
%dev.quarkus.hibernate-orm.schema-management.strategy=update
# =========================
# PROD (Render)
# =========================
%prod.quarkus.http.host=0.0.0.0
%prod.quarkus.http.port=${PORT:8080}
# Logging meno verboso in prod (più veloce)
%prod.quarkus.log.category."org.hibernate".level=WARN
%prod.quarkus.log.category."io.quarkus".level=INFO
%prod.quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c] %s%e%n
# =========================
# DATABASE POSTGRES (Render)
# =========================
%prod.quarkus.datasource.db-kind=postgresql
%prod.quarkus.datasource.username=mario_rf2r_user
%prod.quarkus.datasource.password=${DB_PASSWORD}
%prod.quarkus.datasource.jdbc.url=jdbc:postgresql://dpg-d66uq3juibrs73etp3rg-a.frankfurt-postgres.render.com:5432/mario_rf2r
# ------- Connection Pool ottimizzato per Render Free -------
# Riduce RAM ma mantiene buona reattività
%prod.quarkus.datasource.jdbc.max-size=10
%prod.quarkus.datasource.jdbc.min-size=0
%prod.quarkus.datasource.jdbc.initial-size=0
%prod.quarkus.datasource.jdbc.idle-removal-interval=PT30S
%prod.quarkus.datasource.jdbc.acquisition-timeout=PT10S
# Kill connection idle (per evitare freeze su Render Free)
%prod.quarkus.datasource.jdbc.background-validation=true
%prod.quarkus.datasource.jdbc.validation-interval=PT30S
# =========================
# HIBERNATE
# =========================
%prod.quarkus.hibernate-orm.schema-management.strategy=none
# Password: elimina questo da prod, rallenta e non serve
# %prod.quarkus.hibernate-orm.log.sql=true
%prod.quarkus.hibernate-orm.log.sql=false
# Riduce la memoria di Hibernate
%prod.quarkus.hibernate-orm.jdbc.statement-batch-size=20
# =========================
# FLYWAY
# =========================
%prod.quarkus.flyway.migrate-at-start=true
%prod.quarkus.flyway.locations=db/migration
%prod.quarkus.flyway.baseline-on-migrate=true
%prod.quarkus.flyway.baseline-version=1
# =========================
# JWT RSA RS256
# =========================
%prod.mp.jwt.verify.publickey.location=key/publicKey.pem
%prod.mp.jwt.verify.issuer=game-backend
%prod.smallrye.jwt.sign.key=${JWT_PRIVATE_KEY}
%prod.smallrye.jwt.sign.key-format=PEM
%prod.smallrye.jwt.sign.algorithm=RS256
%prod.quarkus.smallrye-jwt.enabled=true
